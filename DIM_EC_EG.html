<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calcul débit & DN – EC / EG</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 40px auto;
    }
    h2, h3 {
      margin-top: 25px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input {
      width: 100%;
      padding: 6px;
      margin-top: 3px;
    }
    .result {
      margin-top: 20px;
      padding: 10px;
      background: #f2f2f2;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h2>Calcul hydraulique EC / EG</h2>

<h3>Eau Chaude (EC)</h3>
<label>ΔT (°C)</label>
<input id="dt_ec" type="number" step="0.1">

<label>Puissance (kW)</label>
<input id="p_ec" type="number" step="0.1">

<h3>Eau Glacée (EG)</h3>
<label>ΔT (°C)</label>
<input id="dt_eg" type="number" step="0.1">

<label>Puissance (kW)</label>
<input id="p_eg" type="number" step="0.1">

<div class="result">
  EC : <span id="q_ec">–</span> m³/h – <span id="dn_ec">–</span><br>
  EG : <span id="q_eg">–</span> m³/h – <span id="dn_eg">–</span><br><br>
 EC : <span id="p_ec"> - </span> kW - <span id="dn_ec">–</span> - EG :  <span id="p_eg"> - </span> kW - <span id="dn_eg">–</span>
  
</div>

<script>
// Tableau ACIER (exemple – à ajuster ensuite)
const tableauDN = [
  { dn: 15, qmax: 0.29 },
  { dn: 20, qmax: 0.64 },
  { dn: 25, qmax: 1.19 },
  { dn: 32, qmax: 2.45 },
  { dn: 40, qmax: 3.55 },
  { dn: 50, qmax: 5.90 },
  { dn: 65, qmax: 14 },
  { dn: 80, qmax: 19.25 },
  { dn: 100, qmax: 32.5 },
  { dn: 125, qmax: 49 },
];

function trouverDN(debit) {
  const ligne = tableauDN.find(l => debit <= l.qmax);
  return ligne ? `DN ${ligne.dn}` : "Hors tableau";
}

function calcul() {
  const dtEC = parseFloat(dt_ec.value);
  const pEC  = parseFloat(p_ec.value);
  const dtEG = parseFloat(dt_eg.value);
  const pEG  = parseFloat(p_eg.value);

  if (dtEC && pEC) {
    const qEC = pEC / (1.16 * dtEC);
    q_ec.textContent = qEC.toFixed(2);
    dn_ec.textContent = trouverDN(qEC);
  }

  if (dtEG && pEG) {
    const qEG = pEG / (1.16 * dtEG);
    q_eg.textContent = qEG.toFixed(2);
    dn_eg.textContent = trouverDN(qEG);
  }
}

document.querySelectorAll("input").forEach(i =>
  i.addEventListener("input", calcul)
);
</script>

</body>
</html>
